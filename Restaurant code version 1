#include "User_Iterations.h"


const vector <string> itemMenu = { "(1)  Classic Pizza", "(2)  BBQ Burger", "(3)  BBQ Ribs", "(4)  Chicken Tacos", "(5)  Large Fries", "(6)  Onion Rings", "(7)  Coca-cola", "(8)  Sprite", "(9)  Water", "(10) Apple Pie" };
const vector <double> menuPrices = { 12.99, 10.37, 15.99, 8.99, 4.99, 4.99, 1.99, 1.99, 1.99, 12.99 };
vector<int> quantity = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0,};


void displayMenu(vector <string> itemMenu, vector <double> menuPrices) {
	for (int i = 0; i < itemMenu.size(); ++i) {
		cout << itemMenu[i] << ": " << menuPrices[i] << endl;
	}
}

void take_order(vector<int> &quantity) {
	int item, amount;
	
	do {
		cout << "Enter item code (enter 0 when done) [1 - 10] : "; cin >> item;
		if (item >= 1 && item <= 10) {
			cout << "Enter quantity: "; cin >> amount;
			if (amount > 0) {
				quantity.at(item - 1) = amount;
			}
		}

	} while (item != 0);
	

}

int findDiscount() {
	int discount;
	cout << "Enter discount code. 1 for senior citizen. 2 for Preferred member. 3 for Educator. 4 for Veteran. " << endl;
	cin >> discount;
	switch (discount) {
	case 1:
		discount = 5;
		break;
	case 2:
		discount = 8;
		break;
	case 3:
		discount = 2;
		break;
	case 4:
		discount = 4;
		break;
	default:
		discount = 0;
	}
	return discount;

}


double calculateTotal(vector <double> menuPrices, vector <int> quantity, double finalDiscount) {
	double discount = finalDiscount;
	double tax = 0.06;
	int size = menuPrices.size();
	double store;
	double sum = 0;
	for (int i = 0; i < size; i++)
	{
		store = (menuPrices[i] * quantity[i]) + menuPrices[i] * quantity[i] * (tax);
		sum += store;
	}
	sum = sum - (sum * (discount / 100));
	return sum;

}

bool takePay(double totalPrice) {
	int cardType;
	double howMuch;
	double paidBalance = 0;
	string choice;
	bool continueOrNot = true;
	cout << "\nThanks! We're almost done processing your order";
	while(continueOrNot = true){
		
		do {
			cout << "\nAmount owed: " << (totalPrice - paidBalance);
			cout << "\nSelect 1 for debit or 2 for credit: ";
			cin >> cardType;

			switch (cardType) {
			case 1:
				cout << "\nSelected card type: debit";
				break;
			case 2:
				cout << "\nSelected card type: credit";
				break;
			default:
				cout << "\nopps it looks like you did not select a correct payment menthod." << endl;
				cout << "\nWould you still like to continue with your order?: ";
				cin >> choice;
				if (choice[0] == 'y' || choice[0] == 'Y') {
					continueOrNot = true;
				}
				else {
					continueOrNot = false;
				}
			}
			cout << "\nEnter amount you want to put on this card: ";
			cin >> howMuch;
			paidBalance += howMuch;

		} while (paidBalance < totalPrice);

	}
	
	
	if (paidBalance = totalPrice) {

		return true;
	}
	else return false;

}





int main() {
	double finalDiscount = findDiscount();
	
	displayMenu(itemMenu, menuPrices);
	
	take_order(quantity);

	double totalPrice = calculateTotal(menuPrices, quantity, finalDiscount);

	printf("Your total is: %.2f", totalPrice);
	cout << "\nDiscount rate is: " << finalDiscount << "%.";

	bool balancePaid = takePay(totalPrice);

	if (balancePaid == true) {
		cout << "\nThank you for your order! Have a great day!" << endl;
	}
	
	for (auto i : quantity) {
		cout << i << " ";
	}
}
